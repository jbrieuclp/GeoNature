<div class="container">
    <button class="btn btn-secondary" routerLink="/metadata">  <i class="fa fa-arrow-left" aria-hidden="true"></i> Retour
    </button>
    <div class=" row row-0 ">
        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-6 padding-sm">
          <div class="card ">
            <div class="card-body">
              <h3>
                Jeu de données
              </h3>
      
  
              <small>Cadre d'acquisition </small>
              <ng-select 
                class="auto"
                [items]="acquisitionFrameworks | async"
                bindLabel="acquisition_framework_name"
                bindValue="id_acquisition_framework"
                [disabled]="disabled"
                placeholder="Cadres d'acquisition"
                [virtualScroll]="true"
                [formControl]="datasetForm.get('id_acquisition_framework')">
                <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                  <div matTooltip="{{item.acquisition_framework_name}}"><span class="pre-wrap">{{item.acquisition_framework_name}}</span></div>
                </ng-template>
              </ng-select>
      
              <small>Nom du JDD </small>
              <div class="form-group">
                  <div class="input-group">
                      <input class="form-control form-control-sm"
                        type="text" name="" id="" [formControl]="datasetForm.get('dataset_name')">
                    </div>
                <small *ngIf="datasetForm.get('dataset_name').errors?.maxlength" class="error" style="color:red">
                  Le nom du JDD doit être inférieur ou égal à 150 caractères
                </small>
              </div>
      
              <small>Nom court du JDD </small>
              <div class="form-group">
                  <div class="input-group">
                      <input class="form-control form-control-sm"
                        type="text" name="" id="" [formControl]="datasetForm.get('dataset_shortname')">
      
                    </div>
                <small *ngIf="datasetForm.get('dataset_shortname').errors?.maxlength" class="error" style="color:red">
                  Le nom court du JDD doit être inférieur ou égal à 30 caractères
                </small>
              </div>

              <small>Description</small>
              <div class="input-group">
                <input class="form-control form-control-sm"
                  type="text" name="" id="" [formControl]="datasetForm.get('dataset_desc')">
              </div>
      
              <small>Domaine</small>
              <div class="form-check" padding-lg>
                <input [formControl]="datasetForm.get('terrestrial_domain')" class="" type="checkbox" name="domaine" id="terrestre"
                  value="true">
                <small class="" for="terrestre">
                  Domaine terrestre
                </small>
              </div>
              <div class="form-check">
                <input [formControl]="datasetForm.get('marine_domain')" type="checkbox" name="domaine" id="marin">
                <small class="" for="marin">
                  Domaine marin
                </small>
              </div>
              
              <pnx-nomenclature 
                  class="auto"
                  label="Type de données" 
                  [parentFormControl]="datasetForm.get('id_nomenclature_data_type')"
                  codeNomenclatureType="DATA_TYP">
              </pnx-nomenclature>

              <pnx-nomenclature 
                  class="auto"
                  label="Objectif" 
                  [parentFormControl]="datasetForm.get('id_nomenclature_dataset_objectif')"
                  codeNomenclatureType="JDD_OBJECTIFS">
              </pnx-nomenclature>
      
              <pnx-nomenclature 
                  class="auto"
                  label="Méthode de collecte" 
                  [parentFormControl]="datasetForm.get('id_nomenclature_collecting_method')"
                  codeNomenclatureType="METHO_RECUEIL">
              </pnx-nomenclature>
      
              <pnx-nomenclature 
                  class="auto"
                  label="Origine des données" 
                  [parentFormControl]="datasetForm.get('id_nomenclature_data_origin')"
                  codeNomenclatureType="DS_PUBLIQUE">
              </pnx-nomenclature>
      
              <pnx-nomenclature 
                  class="auto"
                  label="Statut source" 
                  [parentFormControl]="datasetForm.get('id_nomenclature_source_status')"
                  codeNomenclatureType="STATUT_SOURCE">
              </pnx-nomenclature>
      
              <pnx-nomenclature
                  class="auto"
                  label="Type de ressource" 
                  [parentFormControl]="datasetForm.get('id_nomenclature_resource_type')"
                  codeNomenclatureType="RESOURCE_TYP">
              </pnx-nomenclature>
      
              <input [formControl]="datasetForm.get('active')" type="checkbox" name="active" id="active" [value]="true">
              <small class="" for="active">
                Actif
              </small>

              <input [formControl]="datasetForm.controls.validable" type="checkbox" name="validable" id="validable" [value]="true">
              <small class="" for="validable">
                Validable
              </small>
            </div>
      
          </div>
        </div>
      
        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 padding-sm">
      
      
          <div class="card">
      
            <div class="card-body">
      
              <pnx-metadata-actor [parentFormArray]="cor_dataset_actor_array"> </pnx-metadata-actor>
              <button class="btn btn-primary btn-sm margin-top-sm" (click)="addFormArray()">
                  <i class="fa fa-plus"></i>
                </button>
      
            </div>
          </div>
        </div>
      
      </div>
      
      <button [disabled]="datasetForm.invalid || cor_dataset_actor_array.invalid" class="btn btn-success margin-top-sm"
        (click)="postDataset()"> Enregistrer le jeu de données</button>
      <button class="btn btn-danger margin-top-sm" routerLink="/metadata/datasets"> Annuler</button>
      
</div>

